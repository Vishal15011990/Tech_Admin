@model Tech_Admin.Models.FileUpload

@{
    ViewBag.Title = "FileUpload";
}

    <style>
    a.glyphicon.glyphicon-upload.txt {
        font-size: 50px;
    }

    .form-control
    {
        height:100vh;
    }
        /*input#TxtFileUpload {*/
            /* align-content: center; */
            /* align-items: center; */
            /*position: relative;
            padding: 550px;
            font-size: 5em;
            width: 100%;
            height: 100vh;*/
            /* margin-top: 500px; */
            /* left: 0px; */
            /* padding: 4px; */
        /*}
        .file {
            position: absolute;
            height: 100%;
        }*/
    </style>


<a class="glyphicon glyphicon-upload txt">File Upload</a>
<hr />

<div class="row-lg-12">
    <div class="col-lg-12">
        <div class="form-control">
            <div class="file">
                <input type="file" id="TxtFileUpload" name="files" />
            </div>
            <div>
                <span class="class_span" id="lbltxtupload"></span>
            </div>
        </div>
    </div>
</div>

<div class="form-control">
    <div class="col-md-12">
        <input type="button" id="fileUpload"  value="Upload File"/>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#fileUpload").on("click", function () {
            
            var data = $("#TxtFileUpload").get(0);
        
            var files = [data.files];
            var fileData = new FormData();
            for (var i = 0; i < files.length; i++) {
                if (files[i][0] != null)
                    fileData.append(i, files[i][0]);
            } 
            $.ajax({
                url: '@Url.Action("File_Upload", "Employee_Master")',
                type: "POST",
                data: fileData,
                contentType: false,
                processData: false,
                success: function (result) {
                    if (result=="Success") {
                        swal("File Upload","Uploaded Succesfully","success");
                        //$("#lbltxtupload").html("File Uploaded").show();
                    }
                    else {
                        swal("Error!", "File Not Uploaded", "warning");
                        //$("#lbltxtupload").html("File Not Uploaded").show();

                    }
                },
                error: function () {
                    alert("Not Uploaded")
                }
            });
        });

        $("#TxtFileUpload").change(function () {
            // Get uploaded file extension
          
            var extension = $(this).val().split('.').pop().toLowerCase();
            // Create array with the files extensions that we wish to upload
            var validFileExtensions = ['jpeg', 'jpg', 'png', 'gif', 'bmp', 'pdf', 'docx', 'doc', 'odt', 'xls', 'xlsx', 'ods', 'ppt', 'pptx', 'txt', 'mkv', 'mp4'];
            //Check file extension in the array.if -1 that means the file extension is not in the list. 
            if ($.inArray(extension, validFileExtensions) == -1) {
                $("#lbltxtupload").html("Sorry!! Upload only jpg, jpeg, png, gif, bmp ,pdf, docx, doc, odt, xls, xlsx, ods, ppt, pptx, txt, file").show().fadeOut(3000);
                $("#lbltxtupload").css("border-color", "red");
                // Clear fileuload control selected file
                $(this).replaceWith($(this).val('').clone(true));
                //Disable Submit Button
                $("#fileUpload").prop('disabled', true);
            }
            else {
                
                // Check and restrict the file size .
                if ($(this).get(0).files[0].size < (2327680)) {
                    $("#lbltxtupload").html("Sorry!! Max allowed file size is 200mb").show().fadeOut(3000);
                    $("#lbltxtupload").css("border-color", "red");
                    // Clear fileuload control selected file
                    $(this).replaceWith($(this).val('').clone(true));
                    //Disable Submit Button
                    $("#fileUpload").prop('disabled', true);
                }
                else {
                    //Clear and Hide message span
                    $("#lbltxtupload").text('').hide();
                    //Enable Submit Button
                    $("#fileUpload").prop('disabled', false);
                }
            }
        });



    });

</script>